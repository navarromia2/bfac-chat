---
title: "02AA_tab-1-pois-any-violence"
author: "Mia Navarro"
date: "2025-08-06"
output:
  html_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Project Overview

### 0. Configure environment. Load data.
```{r config, show=F, warning=F, message=F}

source(here::here("0-config.R"))

#temp data from 01B
date_data <- "2025-08-06"

df_all2 <- read_csv(paste0(final_data_path,"df_all_",date_data,".csv"))
df_mal2 <- read_csv(paste0(final_data_path,"df_mal_",date_data,".csv"))
df_pne2 <- read_csv(paste0(final_data_path,"df_pne_",date_data,".csv"))
df_dia2 <- read_csv(paste0(final_data_path,"df_dia_",date_data,".csv"))

head(df_all2); head(df_mal2); head(df_pne2); head(df_dia2)

```

### Poisson regression analysis w/ offset
#### 2A. Primary analysis: Does violence affect overall treatment seeking patterns?

```{r reg-run, warning=F, message=F, include=F}

m1_pois_any_RR <- create_pois_any_RR(df_all2)
m2_mal_pois_any_RR <- create_pois_any_RR(df_mal2)
m2_pne_pois_any_RR <- create_pois_any_RR(df_pne2)
m2_dia_pois_any_RR <- create_pois_any_RR(df_dia2)

## glimpse of results
summary(m1_pois_any_RR)
exp(summary(m1_pois_any_RR)$coeff) #exponentiate to get IRR

```

### 2B. Consolidate to one table. Download.
```{r}

table_1_RR <- create_table_1_RR(create_doc=T)
table_1_html_RR <- create_table_1_RR(create_doc=F)

table_1_RR; table_1_html_RR

```

### NEGATIVE BINOMIAL regression analysis w/ offset
#### 2A. Primary analysis: Does violence affect overall treatment seeking patterns?

```{r reg-run, warning=F, message=F, include=F}

m1_nb_any_RR <- create_nb_any_RR(df_all2)
m2_mal_nb_any_RR <- create_nb_any_RR(df_mal2)
m2_pne_nb_any_RR <- create_nb_any_RR(df_pne2)
m2_dia_nb_any_RR <- create_nb_any_RR(df_dia2)

## glimpse of results
summary(m1_nb_any_RR)
exp(summary(m1_nb_any_RR)$coeff) #exponentiate to get IRR

```

### 2B. Consolidate to one table. Download.
```{r}

table_1_nb_RR <- create_table_1_nb_RR(create_doc=T)
table_1_nb_html_RR <- create_table_1_nb_RR(create_doc=F)

table_1_nb_RR; table_1_nb_html_RR

```